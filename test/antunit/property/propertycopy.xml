<project name="propertycopy"
         xmlns:au="antlib:org.apache.ant.antunit"
         xmlns:antcontrib="antlib:net.sf.antcontrib">
    <import file="../common.xml" />
  
    <target name="testCopy">
        <property name="org" value="MyOrg" />
        <property name="org.MyOrg.DisplayName" value="My Organiziation" />
        <antcontrib:propertycopy name="displayName" from="org.${org}.DisplayName" />

        <au:assertPropertyEquals name="displayName"
                                 value="${org.MyOrg.DisplayName}"
                                 message="displayName failed" />
      </target>
  
    <target name="testSilent">
        <antcontrib:propertycopy name="foo" from="bar" silent="true"/>
        <au:assertTrue>
            <not>
                <isset property="foo" />
            </not>
        </au:assertTrue>
    </target>

    <target name="testNotSilent">
        <au:expectfailure expectedmessage="Property 'bar' is not defined.">
            <antcontrib:propertycopy name="foo" from="bar"/>
        </au:expectfailure>
    </target>

    <target name="testMissingName">
        <au:expectfailure expectedmessage="You must specify a property to set.">
            <antcontrib:propertycopy from="bar"/>
        </au:expectfailure>
    </target>

    <target name="testMissingFrom">
        <au:expectfailure expectedmessage="Missing the 'from' attribute.">
            <antcontrib:propertycopy name="foo"/>
        </au:expectfailure>
    </target>
</project>